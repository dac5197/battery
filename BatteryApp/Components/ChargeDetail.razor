@inject IChargeService chargeService

@if (ShowModal)
{
    <div class="modal" tabindex="-1" role="dialog" id="chargeModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Charge Detail</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <EditForm Model="@Charge" OnValidSubmit="@HandleValidSubmit">
                        <div class="form-group">
                            <label for="title">Title</label>
                            <InputText @bind-Value="@Charge.Title" id="title" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label for="desc">Description</label>
                            <InputTextArea @bind-Value="@Charge.Description" id="desc" class="form-control">@Charge.Description</InputTextArea>
                        </div>
                        <div class="form-check">
                            <InputCheckbox @bind-Value="@Charge.IsComplete" id="is-complete" class="form-check-input" />
                            <label class="form-check-label" for="is-complete">Complete</label>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    </EditForm>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-backdrop fade show"></div>
}
}

@code {
    [Parameter]
    public Charge Charge { get; set; }

    [Parameter]
    public bool ShowModal { get; set; } = false;

    private async void HandleValidSubmit()
    {
        await chargeService.Add(Charge);
        ShowModal = false;
        StateHasChanged();
    }
}
